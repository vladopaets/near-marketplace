{"version":3,"sources":["utils/marketplace.js","utils/config.js","utils/near.js","components/Wallet.js","components/utils/Notifications.js","components/marketplace/AddProduct.js","components/marketplace/Product.js","components/utils/Loader.js","components/marketplace/Products.js","components/utils/Cover.js","assets/img/sandwich.jpeg","App.js","index.js"],"names":["GAS","buyProduct","id","price","window","contract","productId","CONTRACT_NAME","process","environment","env","networkId","nodeUrl","contractName","walletUrl","helperUrl","explorerUrl","Error","nearEnv","console","log","keyStores","BrowserLocalStorageKeyStore","connect","keyStore","near","walletConnection","WalletConnection","accountId","getAccountId","Contract","account","viewMethods","changeMethods","accountBalance","formatNearAmount","getAccountBalance","total","login","requestSignIn","logout","signOut","location","reload","Wallet","address","amount","symbol","destroy","Dropdown","Toggle","variant","align","className","Spinner","animation","size","Menu","Item","href","target","Stack","direction","gap","Divider","as","onClick","Notification","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","NotificationSuccess","text","NotificationError","DefaultProps","defaultProps","AddProduct","save","useState","name","setName","image","setImage","description","setDescription","setLocation","setPrice","show","setShow","handleClose","Button","style","width","Modal","onHide","centered","Header","closeButton","Title","Form","Body","FloatingLabel","controlId","label","Control","type","onChange","e","value","placeholder","height","Footer","disabled","Product","product","buy","sold","owner","Col","Card","Badge","bg","src","alt","objectFit","Text","utils","format","Loader","role","Products","products","setProducts","loading","setLoading","getProducts","useCallback","error","addProduct","data","uuid4","parseNearAmount","setProduct","then","resp","toast","useEffect","Row","xs","sm","lg","map","_product","index","Cover","coverImg","background","minHeight","maxWidth","App","balance","setBalance","getBalance","Container","fluid","Nav","nearInitPromise","initializeContract","container","document","getElementById","createRoot","render","catch"],"mappings":"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","file":"static/js/main.8a164b7a.chunk.js","sourcesContent":["import { v4 as uuid4 } from \"uuid\";\nimport { parseNearAmount } from \"near-api-js/lib/utils/format\";\n\nconst GAS = 100000000000000;\n\nexport function createProduct(product) {\n    product.id = uuid4();\n    product.price = parseNearAmount(product.price + \"\");\n    return window.contract.setProduct({ product });\n\n}\nexport function getProducts() {\n    return window.contract.getProducts();\n}\n\nexport async function buyProduct({ id, price }) {\n    await window.contract.buyProduct({ productId: id }, GAS, price);\n}","const CONTRACT_NAME = process.env.CONTRACT_NAME || \"tcontract.vladopaets.testnet\"; // line 1\n\nfunction environment(env) {\n  switch (env) {\n    case \"mainnet\": // line 5\n      return {\n        networkId: \"mainnet\",\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n        explorerUrl: \"https://explorer.mainnet.near.org\",\n      };\n    case \"testnet\": // line 14\n      return {\n        networkId: \"testnet\",\n        nodeUrl: \"https://rpc.testnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n        explorerUrl: \"https://explorer.testnet.near.org\",\n      };\n    default:\n      throw Error(`Unknown environment '${env}'.`);\n  }\n}\n\nexport default environment;","import environment from \"./config\";\nimport { connect, Contract, keyStores, WalletConnection } from \"near-api-js\";\nimport { formatNearAmount } from \"near-api-js/lib/utils/format\";\n\nconst nearEnv = environment(\"testnet\");\n\nexport async function initializeContract() {\n    console.log(new keyStores.BrowserLocalStorageKeyStore(), nearEnv)\n    // const near = await connect(\n    //     Object.assign(\n    //         { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },\n    //         nearEnv\n    //     )\n    // );\n\n    const near = await connect(\n        {\n            ...nearEnv,\n            keyStore: new keyStores.BrowserLocalStorageKeyStore()\n        }\n    )\n    console.log(2, near)\n    window.walletConnection = new WalletConnection(near);\n    window.accountId = window.walletConnection.getAccountId();\n    window.contract = new Contract(\n        window.walletConnection.account(),\n        nearEnv.contractName,\n        {\n            viewMethods: [\"getProduct\", \"getProducts\"],\n            changeMethods: [\"buyProduct\", \"setProduct\"],\n        }\n    );\n\n    console.log(1, window.contract)\n}\n\nexport async function accountBalance() {\n    return formatNearAmount(\n        (await window.walletConnection.account().getAccountBalance()).total,\n        2\n    );\n}\n\nexport async function getAccountId() {\n    return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n    window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n    window.walletConnection.signOut();\n    window.location.reload();\n}","import React from \"react\";\nimport { Dropdown, Stack, Spinner } from \"react-bootstrap\";\n\nconst Wallet = ({ address, amount, symbol, destroy }) => {\n  if (address) {\n    return (\n      <>\n        <Dropdown>\n          <Dropdown.Toggle\n            variant=\"light\"\n            align=\"end\"\n            id=\"dropdown-basic\"\n            className=\"d-flex align-items-center border rounded-pill py-1\"\n          >\n            {amount ? (\n              <>\n                {amount} <span className=\"ms-1\"> {symbol}</span>\n              </>\n            ) : (\n              <Spinner animation=\"border\" size=\"sm\" className=\"opacity-25\" />\n            )}\n          </Dropdown.Toggle>\n\n          <Dropdown.Menu className=\"shadow-lg border-0\">\n            <Dropdown.Item\n              href={`https://explorer.testnet.near.org/accounts/${address}`}\n              target=\"_blank\"\n            >\n              <Stack direction=\"horizontal\" gap={2}>\n                <i className=\"bi bi-person-circle fs-4\" />\n                <span className=\"font-monospace\">{address}</span>\n              </Stack>\n            </Dropdown.Item>\n\n            <Dropdown.Divider />\n            <Dropdown.Item\n              as=\"button\"\n              className=\"d-flex align-items-center\"\n              onClick={() => {\n                destroy();\n              }}\n            >\n              <i className=\"bi bi-box-arrow-right me-2 fs-4\" />\n              Disconnect\n            </Dropdown.Item>\n          </Dropdown.Menu>\n        </Dropdown>\n      </>\n    );\n  }\n\n  return null;\n};\n\nexport default Wallet;","import React from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport PropTypes from \"prop-types\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst Notification = () => (\n  <ToastContainer\n    position=\"bottom-center\"\n    autoClose={5000}\n    hideProgressBar\n    newestOnTop\n    closeOnClick\n    rtl={false}\n    pauseOnFocusLoss\n    draggable={false}\n    pauseOnHover\n  />\n);\n\nconst NotificationSuccess = ({ text }) => (\n  <div>\n    <i className=\"bi bi-check-circle-fill text-success mx-2\" />\n    <span className=\"text-secondary mx-1\">{text}</span>\n  </div>\n);\n\nconst NotificationError = ({ text }) => (\n  <div>\n    <i className=\"bi bi-x-circle-fill text-danger mx-2\" />\n    <span className=\"text-secondary mx-1\">{text}</span>\n  </div>\n);\n\nconst Props = {\n  text: PropTypes.string,\n};\n\nconst DefaultProps = {\n  text: \"\",\n};\n\nNotificationSuccess.propTypes = Props;\nNotificationSuccess.defaultProps = DefaultProps;\n\nNotificationError.propTypes = Props;\nNotificationError.defaultProps = DefaultProps;\n\nexport { Notification, NotificationSuccess, NotificationError };","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Modal, Form, FloatingLabel } from \"react-bootstrap\";\n\nconst AddProduct = ({ save }) => {\n    const [name, setName] = useState(\"\");\n    const [image, setImage] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    const [location, setLocation] = useState(\"\");\n    const [price, setPrice] = useState(0);\n    const isFormFilled = () => name && image && description && location && price;\n\n    const [show, setShow] = useState(false);\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n\n    return (\n        <>\n            <Button\n                onClick={handleShow}\n                variant=\"dark\"\n                className=\"rounded-pill px-0\"\n                style={{ width: \"38px\" }}\n            >\n                <i className=\"bi bi-plus\"></i>\n            </Button>\n            <Modal show={show} onHide={handleClose} centered>\n                <Modal.Header closeButton>\n                    <Modal.Title>New Product</Modal.Title>\n                </Modal.Header>\n                <Form>\n                    <Modal.Body>\n                        <FloatingLabel\n                            controlId=\"inputName\"\n                            label=\"Product name\"\n                            className=\"mb-3\"\n                        >\n                            <Form.Control\n                                type=\"text\"\n                                onChange={(e) => {\n                                    setName(e.target.value);\n                                }}\n                                placeholder=\"Enter name of product\"\n                            />\n                        </FloatingLabel>\n                        <FloatingLabel\n                            controlId=\"inputUrl\"\n                            label=\"Image URL\"\n                            className=\"mb-3\"\n                        >\n                            <Form.Control\n                                type=\"text\"\n                                placeholder=\"Image URL\"\n                                onChange={(e) => {\n                                    setImage(e.target.value);\n                                }}\n                            />\n                        </FloatingLabel>\n                        <FloatingLabel\n                            controlId=\"inputDescription\"\n                            label=\"Description\"\n                            className=\"mb-3\"\n                        >\n                            <Form.Control\n                                as=\"textarea\"\n                                placeholder=\"description\"\n                                style={{ height: \"80px\" }}\n                                onChange={(e) => {\n                                    setDescription(e.target.value);\n                                }}\n                            />\n                        </FloatingLabel>\n                        <FloatingLabel\n                            controlId=\"inputLocation\"\n                            label=\"Location\"\n                            className=\"mb-3\"\n                        >\n                            <Form.Control\n                                type=\"text\"\n                                placeholder=\"Location\"\n                                onChange={(e) => {\n                                    setLocation(e.target.value);\n                                }}\n                            />\n                        </FloatingLabel>\n                        <FloatingLabel\n                            controlId=\"inputPrice\"\n                            label=\"Price\"\n                            className=\"mb-3\"\n                        >\n                            <Form.Control\n                                type=\"text\"\n                                placeholder=\"Price\"\n                                onChange={(e) => {\n                                    setPrice(e.target.value);\n                                }}\n                            />\n                        </FloatingLabel>\n                    </Modal.Body>\n                </Form>\n                <Modal.Footer>\n                    <Button variant=\"outline-secondary\" onClick={handleClose}>\n                        Close\n                    </Button>\n                    <Button\n                        variant=\"dark\"\n                        disabled={!isFormFilled()}\n                        onClick={() => {\n                            save({\n                                name,\n                                image,\n                                description,\n                                location,\n                                price,\n                            });\n                            handleClose();\n                        }}\n                    >\n                        Save product\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n};\n\nAddProduct.propTypes = {\n    save: PropTypes.func.isRequired,\n};\n\nexport default AddProduct;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { utils } from \"near-api-js\";\nimport { Card, Button, Col, Badge, Stack } from \"react-bootstrap\";\n\nconst Product = ({ product, buy }) => {\n    const { id, price, name, description, sold, location, image, owner } =\n        product;\n\n    const triggerBuy = () => {\n        buy(id, price);\n    };\n\n    return (\n        <Col key={id}>\n            <Card className=\" h-100\">\n                <Card.Header>\n                    <Stack direction=\"horizontal\" gap={2}>\n                        <span className=\"font-monospace text-secondary\">{owner}</span>\n                        <Badge bg=\"secondary\" className=\"ms-auto\">\n                            {sold} Sold\n                        </Badge>\n                    </Stack>\n                </Card.Header>\n                <div className=\" ratio ratio-4x3\">\n                    <img src={image} alt={name} style={{ objectFit: \"cover\" }} />\n                </div>\n                <Card.Body className=\"d-flex  flex-column text-center\">\n                    <Card.Title>{name}</Card.Title>\n                    <Card.Text className=\"flex-grow-1 \">{description}</Card.Text>\n                    <Card.Text className=\"text-secondary\">\n                        <span>{location}</span>\n                    </Card.Text>\n                    <Button\n                        variant=\"outline-dark\"\n                        onClick={triggerBuy}\n                        className=\"w-100 py-3\"\n                    >\n                        Buy for {utils.format.formatNearAmount(price)} NEAR\n                    </Button>\n                </Card.Body>\n            </Card>\n        </Col>\n    );\n};\n\nProduct.propTypes = {\n    product: PropTypes.instanceOf(Object).isRequired,\n    buy: PropTypes.func.isRequired,\n};\n\nexport default Product;","import React from \"react\";\nimport { Spinner } from \"react-bootstrap\";\n\nconst Loader = () => (\n  <div className=\"d-flex justify-content-center\">\n    <Spinner animation=\"border\" role=\"status\" className=\"opacity-25\">\n      <span className=\"visually-hidden\">Loading...</span>\n    </Spinner>\n  </div>\n);\nexport default Loader;","import React, { useEffect, useState, useCallback } from \"react\";\nimport { toast } from \"react-toastify\";\nimport AddProduct from \"./AddProduct\";\nimport Product from \"./Product\";\nimport Loader from \"../utils/Loader\";\nimport { Row } from \"react-bootstrap\";\nimport { NotificationSuccess, NotificationError } from \"../utils/Notifications\";\nimport {\n    getProducts as getProductList,\n    buyProduct,\n    createProduct,\n} from \"../../utils/marketplace\";\n\nconst Products = () => {\n    const [products, setProducts] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const getProducts = useCallback(async () => {\n        try {\n            setLoading(true);\n            setProducts(await getProductList());\n        } catch (error) {\n            console.log({ error });\n        } finally {\n            setLoading(false);\n        }\n    });\n\n    const addProduct = async (data) => {\n        try {\n            setLoading(true);\n            createProduct(data).then((resp) => {\n                getProducts();\n            });\n            toast(<NotificationSuccess text=\"Product added successfully.\" />);\n        } catch (error) {\n            console.log({ error });\n            toast(<NotificationError text=\"Failed to create a product.\" />);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const buy = async (id, price) => {\n        try {\n            await buyProduct({\n                id,\n                price,\n            }).then((resp) => getProducts());\n            toast(<NotificationSuccess text=\"Product bought successfully\" />);\n        } catch (error) {\n            console.log({ error });\n            toast(<NotificationError text=\"Failed to purchase product.\" />);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        getProducts();\n    }, []);\n\n    return (\n        <>\n            {!loading ? (\n                <>\n                    <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                        <h1 className=\"fs-4 fw-bold mb-0\">Street Food</h1>\n                        <AddProduct save={addProduct} />\n                    </div>\n                    <Row xs={1} sm={2} lg={3} className=\"g-3  mb-5 g-xl-4 g-xxl-5\">\n                        {products.map((_product, index) => (\n                            <Product\n                                product={{\n                                    ..._product,\n                                }}\n                                key={index}\n                                buy={buy}\n                            />\n                        ))}\n                    </Row>\n                </>\n            ) : (\n                <Loader />\n            )}\n        </>\n    );\n};\n\nexport default Products;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"react-bootstrap\";\n\nconst Cover = ({ name, login, coverImg }) => {\n  if ((name, login, coverImg)) {\n    return (\n      <div\n        className=\"d-flex justify-content-center flex-column text-center \"\n        style={{ background: \"#000\", minHeight: \"100vh\" }}\n      >\n        <div className=\"mt-auto text-light mb-5\">\n          <div\n            className=\" ratio ratio-1x1 mx-auto mb-2\"\n            style={{ maxWidth: \"320px\" }}\n          >\n            <img src={coverImg} alt=\"\" />\n          </div>\n          <h1>{name}</h1>\n          <p>Please connect your wallet to continue.</p>\n          <Button\n            onClick={login}\n            variant=\"outline-light\"\n            className=\"rounded-pill px-3 mt-3\"\n          >\n            Connect Wallet\n          </Button>\n        </div>\n        <p className=\"mt-auto text-secondary\">Powered by NEAR</p>\n      </div>\n    );\n  }\n  return null;\n};\n\nCover.propTypes = {\n  name: PropTypes.string,\n};\n\nCover.defaultProps = {\n  name: \"\",\n};\n\nexport default Cover;","export default __webpack_public_path__ + \"static/media/sandwich.2d312449.jpeg\";","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Container, Nav } from \"react-bootstrap\";\nimport { getProducts } from \"./utils/marketplace\";\nimport { login, logout as destroy, accountBalance } from \"./utils/near\";\nimport Wallet from \"./components/Wallet\";\nimport { Notification } from \"./components/utils/Notifications\";\nimport Products from \"./components/marketplace/Products\";\nimport Cover from \"./components/utils/Cover\";\nimport coverImg from \"./assets/img/sandwich.jpeg\";\nimport \"./App.css\";\n\nconst App = function AppWrapper() {\n  const account = window.walletConnection.account();\n  const [balance, setBalance] = useState(\"0\");\n\n  const getBalance = useCallback(async () => {\n    if (account.accountId) {\n      setBalance(await accountBalance());\n    }\n  });\n\n  useEffect(() => {\n    getBalance();\n  }, [getBalance]);\n\n  return (\n    <>\n      <Notification />\n      {account.accountId ? (\n        <Container fluid=\"md\">\n          <Nav className=\"justify-content-end pt-3 pb-5\">\n            <Nav.Item>\n              <Wallet\n                address={account.accountId}\n                amount={balance}\n                symbol=\"NEAR\"\n                destroy={destroy}\n              />\n            </Nav.Item>\n          </Nav>\n          <main> <Products /> </main>\n        </Container>\n      ) : (\n        <Cover name=\"Street Food\" login={login} coverImg={coverImg} />\n      )}\n    </>\n  )\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createRoot } from 'react-dom/client';\nimport App from \"./App\";\nimport { initializeContract } from \"./utils/near\";\n\nimport \"bootstrap\";\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nwindow.nearInitPromise = initializeContract()\n  .then(() => {\n\n    const container = document.getElementById('root');\n    const root = createRoot(container);\n\n    root.render(<App />)\n  })\n  .catch(console.error);\n"],"sourceRoot":""}